<!DOCTYPE html><html lang="th"><head>
<meta charset="utf-8"><title>Login - ClearKhong</title><link rel="stylesheet" href="style.css">
</head><body>
<div class="nav"><div class="brand"><i>◉</i>ClearKhong</div></div>
<div class="container">
  <div class="card" style="max-width:420px;margin:30px auto">
    <h2>เข้าสู่ระบบ</h2>
    <form id="loginForm">
      <input name="username" placeholder="ชื่อผู้ใช้" required style="width:100%;margin:8px 0">
      <input name="password" placeholder="รหัสผ่าน" type="password" required style="width:100%;margin:8px 0">
      <button style="width:100%;margin-top:8px">เข้าสู่ระบบ</button>
    </form>
    <div style="margin-top:10px">ไม่มีบัญชี? <a href="register.html">สมัครสมาชิก</a></div>
  </div>
</div>
<script type="module">
import {api,toast} from './js/common.js';
const form=document.getElementById('loginForm');
form.onsubmit=async e=>{
 e.preventDefault();
 try{
  const body={username:form.username.value.trim(),password:form.password.value};
  const r=await api('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
  toast('ยินดีต้อนรับ!','ok'); 
  location.href=(r.role==='admin'?'admin.html':'home.html');
 }catch(err){ toast(err,'err'); }
};
</script>
</body></html>
